<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>EventLoop.EventProcessor</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_EventLoop-EventProcessor.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/EventLoop-EventProcessor.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">twentefp-eventloop-graphics-0.1.0.5: Used as Lab Assignments Environment at Univeriteit Twente</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>(c) Sebastiaan la Fleur, 2014</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>sebastiaan.la.fleur@gmail.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>All</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">EventLoop.EventProcessor</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Low-level eventloop framework. Uses <code><a href="EventLoop-EventProcessor.html#t:IOMessage">IOMessage</a></code>s to communicate.
This module can be used to express your own <code><a href="EventLoop-Input.html#t:InputEvent">InputEvent</a></code>s and <code><a href="EventLoop-Output.html#t:OutputEvent">OutputEvent</a></code>s.
For instance, we have a keyboard and mouse <code><a href="EventLoop-Input.html#t:InputEvent">InputEvent</a></code> example included in this module's implementation.
But it might be that you want to define your own <code><a href="EventLoop-Input.html#t:InputEvent">InputEvent</a></code> structure. In that case, you can define your own
<code><a href="EventLoop-Json.html#t:FromJSON">FromJSON</a></code> class to express how the literal <code><a href="EventLoop-EventProcessor.html#t:IOMessage">IOMessage</a></code> should be parsed into your own <code><a href="EventLoop-Input.html#t:InputEvent">InputEvent</a></code> datatype.
The same goes for <code><a href="EventLoop-Output.html#t:OutputEvent">OutputEvent</a></code> of course. An <code><a href="EventLoop-EventProcessor.html#t:IOMessage">IOMessage</a></code> is a <code><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-String.html#t:String">String</a></code> literal that the client sends. The accompanied
standard webpage uses JSON as a protocol to express these <code><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-String.html#t:String">String</a></code> literals. </p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:eventloop">eventloop</a> ::  (a -&gt; <a href="EventLoop-EventProcessor.html#t:IOMessage">IOMessage</a> -&gt; ([<a href="EventLoop-EventProcessor.html#t:IOMessage">IOMessage</a>], a)) -&gt; a -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:IOMessage">IOMessage</a> = <a href="EventLoop-Json.html#t:JSONMessage">JSONMessage</a></li><li class="src short"><a href="#v:readRequest">readRequest</a> :: <a href="http://hackage.haskell.org/packages/archive/twentefp-websockets/latest/doc/html/Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/twentefp-websockets/latest/doc/html/Network-WebSockets.html#t:StdOutMutex">StdOutMutex</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> <a href="EventLoop-EventProcessor.html#t:IOMessage">IOMessage</a></li><li class="src short"><a href="#v:sendResponse">sendResponse</a> :: <a href="http://hackage.haskell.org/packages/archive/twentefp-websockets/latest/doc/html/Network-WebSockets.html#t:ConnectionSendMutex">ConnectionSendMutex</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/twentefp-websockets/latest/doc/html/Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/twentefp-websockets/latest/doc/html/Network-WebSockets.html#t:StdOutMutex">StdOutMutex</a> -&gt; <a href="EventLoop-EventProcessor.html#t:IOMessage">IOMessage</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> ()</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a name="v:eventloop" class="def">eventloop</a> <a href="src/EventLoop-EventProcessor.html#eventloop" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (a -&gt; <a href="EventLoop-EventProcessor.html#t:IOMessage">IOMessage</a> -&gt; ([<a href="EventLoop-EventProcessor.html#t:IOMessage">IOMessage</a>], a))</td><td class="doc"><p>The eventhandler eh that maps incoming <code><a href="EventLoop-EventProcessor.html#t:IOMessage">IOMessage</a></code>s to outgoing <code><a href="EventLoop-EventProcessor.html#t:IOMessage">IOMessage</a></code>s. It uses a variable of type a to store information in between calls to the event handler.</p></td></tr><tr><td class="src">-&gt; a</td><td class="doc"><p>The begin store. It should be changed in the eventhandler function.</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Low-level function to call when dealing with IOMessages directly. 
 If you want to use the example implementation using the <code><a href="EventLoop-Input.html#t:InputEvent">InputEvent</a></code> and <code><a href="EventLoop-Output.html#t:OutputEvent">OutputEvent</a></code>
 , you should use the <code><a href="EventLoop-Main.html#v:start">start</a></code> function.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:IOMessage" class="def">IOMessage</a> = <a href="EventLoop-Json.html#t:JSONMessage">JSONMessage</a> <a href="src/EventLoop-EventProcessor.html#IOMessage" class="link">Source</a></p><div class="doc"><p>Type of the message that is used to communicate with the IO device. In this example implementation a webbrowser is used and the messages use JSON encoding.</p></div></div><div class="top"><p class="src"><a name="v:readRequest" class="def">readRequest</a> :: <a href="http://hackage.haskell.org/packages/archive/twentefp-websockets/latest/doc/html/Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/twentefp-websockets/latest/doc/html/Network-WebSockets.html#t:StdOutMutex">StdOutMutex</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> <a href="EventLoop-EventProcessor.html#t:IOMessage">IOMessage</a> <a href="src/EventLoop-EventProcessor.html#readRequest" class="link">Source</a></p><div class="doc"><p>This functions reads a request from the <code><a href="http://hackage.haskell.org/packages/archive/twentefp-websockets/latest/doc/html/Network-WebSockets.html#t:Connection">Connection</a></code> and parses it into an <code><a href="EventLoop-EventProcessor.html#t:IOMessage">IOMessage</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:sendResponse" class="def">sendResponse</a> :: <a href="http://hackage.haskell.org/packages/archive/twentefp-websockets/latest/doc/html/Network-WebSockets.html#t:ConnectionSendMutex">ConnectionSendMutex</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/twentefp-websockets/latest/doc/html/Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/twentefp-websockets/latest/doc/html/Network-WebSockets.html#t:StdOutMutex">StdOutMutex</a> -&gt; <a href="EventLoop-EventProcessor.html#t:IOMessage">IOMessage</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> () <a href="src/EventLoop-EventProcessor.html#sendResponse" class="link">Source</a></p><div class="doc"><p>This function takes an <code><a href="EventLoop-EventProcessor.html#t:IOMessage">IOMessage</a></code> and parses it into a response. Then it sends the response to the <code><a href="http://hackage.haskell.org/packages/archive/twentefp-websockets/latest/doc/html/Network-WebSockets.html#t:Connection">Connection</a></code>. </p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>